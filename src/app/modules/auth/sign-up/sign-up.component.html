<div class="mt-7 container w-25 rounded main-div">
    <div class="pt-3"><p><strong>Sign up</strong></p></div>

    <div *ngIf="showAlert" class="mt-2 alert alert-danger" role="alert">
        {{alert.message}}
    </div>

    <!-- Sign up form -->
    <form class="mt-3" [formGroup]="signUpNgForm" #signInNgForm="ngForm">

        <!-- UserName field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>UserName</mat-label>
                <input id="userName" matInput [formControlName]="'userName'">
                <mat-error *ngIf="signUpNgForm.get('userName').hasError('required')">
                    userName is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- firstName field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>FirstName</mat-label>
                <input id="firstName" matInput [formControlName]="'firstName'">
                <mat-error *ngIf="signUpNgForm.get('firstName').hasError('required')">
                    firstName is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- lastName field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>lastName</mat-label>
                <input id="lastName" matInput [formControlName]="'lastName'">
                <mat-error *ngIf="signUpNgForm.get('lastName').hasError('required')">
                    lastName is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- role field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>role</mat-label>
                <mat-select [(value)]="selectedRole" matInput [formControlName]="'role'">
                    @for (option of roles; track option) {
                    <mat-option [value]="option.Name">{{ option.Name }}</mat-option>
                    }
                </mat-select>
                <mat-error *ngIf="signUpNgForm.get('role').hasError('required')">
                    role is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Email field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>Email address</mat-label>
                <input id="email" matInput [formControlName]="'email'">
                <mat-error *ngIf="signUpNgForm.get('email').hasError('required')">
                    Email address is required
                </mat-error>
                <mat-error *ngIf="signUpNgForm.get('email').hasError('email')">
                    Please enter a valid email address
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Password field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>Password</mat-label>
                <input id="password" matInput type="password" [formControlName]="'password'" #passwordField>
                <button mat-icon-button type="button"
                    (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                    matSuffix>
                    <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'">visibility</mat-icon>
                    <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'">visibility_off</mat-icon>
                </button>
                <mat-error *ngIf="signUpNgForm.get(['password']).hasError('required')">
                    Password is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Confrim Password field -->
        <div class="row">
            <mat-form-field class="w-full">
                <mat-label>Confirm Password</mat-label>
                <input id="confirmPassword" matInput type="password" [formControlName]="'confirmPassword'"
                    #ConfrimPasswordField>
                <button mat-icon-button type="button"
                    (click)="ConfrimPasswordField.type === 'password' ? ConfrimPasswordField.type = 'text' : ConfrimPasswordField.type = 'password'"
                    matSuffix>
                    <mat-icon class="icon-size-5" *ngIf="ConfrimPasswordField.type === 'password'">visibility</mat-icon>
                    <mat-icon class="icon-size-5" *ngIf="ConfrimPasswordField.type === 'text'">visibility_off</mat-icon>
                </button>
                <mat-error *ngIf="signUpNgForm.get(['confirmPassword']).hasError('required')">
                    Confirm Password is required
                </mat-error>
                <mat-error *ngIf="signUpNgForm.get(['confirmPassword']).hasError('mustMatch')">
                    Confirm Password doesn't match Password
                </mat-error>
            </mat-form-field>    
        </div>

        <!-- Submit button -->
        <button class="mt-2 mb-4 w-100" mat-flat-button [color]="'primary'"
            [disabled]="signUpNgForm.disabled" (click)="SignUp()">
            <span *ngIf="!signUpNgForm.disabled">
                Sign Up
            </span>
            <mat-progress-spinner *ngIf="signUpNgForm.disabled" [diameter]="24"
                [mode]="'indeterminate'"></mat-progress-spinner>
        </button>

        <!-- Separator -->
        <!-- <div class="flex items-center mt-8">
            <div class="flex-auto mt-px border-t"></div>
            <div class="flex-auto mt-px border-t"></div>
        </div> -->

    </form>
</div>